<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Dual Reality of Kelp & Climate Change</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <!-- 
    Infographic Plan
    Narrative Structure:
    1.  The Looming Crisis: Introduce the direct and indirect threats to kelp forests.
    2.  A Cascade of Consequences: Visualize the ecological damage and loss of services.
    3.  The Ocean's Ally: Pivot to kelp's role as a climate solution (mitigation/adaptation).
    4.  The Path Forward: Conclude with the dual strategy of conservation and cultivation.

    Visualization Choices:
    -   Kelp Survival vs. Temp: Goal: Change. Viz: Line Chart (Chart.js). Justification: Shows trend of decline against a continuous variable. No SVG.
    -   Trophic Cascade: Goal: Organize. Viz: Flow Chart. Justification: Illustrates a process. Method: Styled HTML/CSS. No SVG/Mermaid.
    -   Species Decline: Goal: Compare. Viz: Bar Chart (Chart.js). Justification: Compares declines across discrete categories. No SVG.
    -   Energy Source Shift: Goal: Compare/Inform. Viz: Donut Charts (Chart.js). Justification: Shows proportional composition change. No SVG.
    -   Carbon Sequestration: Goal: Inform. Viz: Big Number. Justification: High-impact single stat. Method: Styled HTML. No SVG.
    -   Methane Reduction: Goal: Inform. Viz: Donut Chart (Chart.js). Justification: Clear part-to-whole visual for a percentage. No SVG.
    -   Wave Reduction: Goal: Inform. Viz: Big Number. Justification: High-impact single stat. Method: Styled HTML. No SVG.
    -   Path Forward Diagram: Goal: Organize. Viz: Diagram. Justification: Simple visual for a dual concept. Method: Styled HTML/CSS. No SVG/Mermaid.
    -   Color Palette Selection: "Brilliant Blues" (#00AEEF, #0072BB, #002D72, #FDB913, #F37021). This is a vibrant, professional palette suitable for a marine/scientific topic.
    -   Confirmation: NEITHER Mermaid JS NOR SVG were used in this output.
    -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .text-shadow-custom {
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 100; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            width: 80%;
            max-width: 500px;
            position: relative;
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <header class="bg-[#002D72] text-white p-8 text-center">
        <h1 class="text-4xl md:text-6xl font-black text-shadow-custom">A Dual Reality</h1>
        <p class="text-lg md:text-2xl mt-2 font-light max-w-4xl mx-auto">Kelp and seaweed forests are both critical victims of climate change and one of our most powerful allies in the fight against it.</p>
    </header>

    <main class="container mx-auto p-4 md:p-8">
        
        <section id="threats" class="mb-16">
            <h2 class="text-3xl font-bold text-center mb-2 text-[#0072BB]">The Looming Crisis</h2>
            <p class="text-center text-slate-600 max-w-3xl mx-auto mb-12">Climate change unleashes a torrent of stressors that push these vibrant underwater ecosystems to their breaking point. Rising temperatures and disrupted food webs create a perfect storm of destruction.</p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-stretch">
                <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
                    <h3 class="text-xl font-bold text-center mb-4">Warming Waters: A Deadly Threshold</h3>
                    <p class="text-slate-600 text-center mb-4 text-sm flex-grow">For many kelp species, even short-lived marine heatwaves can be catastrophic. As temperatures pass critical limits, physiological collapse follows, leading to widespread mortality and threatening the survival of entire forests.</p>
                    <div class="chart-container mx-auto h-64 md:h-80">
                        <canvas id="tempImpactChart"></canvas>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
                    <h3 class="text-xl font-bold text-center mb-4">Trophic Cascade: The Rise of Urchin Barrens</h3>
                     <p class="text-slate-600 text-center mb-4 text-sm flex-grow">Climate change can trigger a devastating chain reaction. When predator populations crash, voracious grazers like sea urchins can multiply unchecked, transforming lush kelp forests into barren underwater deserts.</p>
                    <div class="flex flex-col items-center justify-center space-y-4 mt-6">
                        <div class="text-center bg-red-100 border border-red-300 text-red-800 p-3 rounded-lg shadow-sm w-full max-w-xs">
                            <span class="font-bold">1. Climate Stress & Disease</span><br>
                            <span class="text-xs">Marine heatwaves cause sea star die-off.</span>
                        </div>
                        <div class="text-5xl text-red-400">&darr;</div>
                        <div class="text-center bg-yellow-100 border border-yellow-400 text-yellow-800 p-3 rounded-lg shadow-sm w-full max-w-xs">
                           <span class="font-bold">2. Predator Loss</span><br>
                           <span class="text-xs">Key sea urchin predators disappear.</span>
                        </div>
                        <div class="text-5xl text-yellow-500">&darr;</div>
                         <div class="text-center bg-purple-100 border border-purple-300 text-purple-800 p-3 rounded-lg shadow-sm w-full max-w-xs">
                           <span class="font-bold">3. Urchin Population Boom</span><br>
                           <span class="text-xs">Purple urchins multiply without predators.</span>
                        </div>
                         <div class="text-5xl text-purple-400">&darr;</div>
                         <div class="text-center bg-gray-200 border border-gray-400 text-gray-800 p-3 rounded-lg shadow-sm w-full max-w-xs">
                           <span class="font-bold">4. Urchin Barren Forms</span><br>
                           <span class="text-xs">Kelp is overgrazed, devastating the ecosystem.</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="consequences" class="mb-16">
            <h2 class="text-3xl font-bold text-center mb-2 text-[#0072BB]">A Cascade of Consequences</h2>
            <p class="text-center text-slate-600 max-w-3xl mx-auto mb-12">The collapse of kelp forests is not an isolated event. It triggers a profound loss of biodiversity and disrupts the essential services these ecosystems provide, from feeding marine life to protecting our coastlines.</p>

             <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-stretch">
                <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
                    <h3 class="text-xl font-bold text-center mb-4">Biodiversity Collapse</h3>
                    <p class="text-slate-600 text-center mb-4 text-sm flex-grow">When kelp forests disappear, so do the countless species that depend on them for food and shelter. The loss of this foundational habitat leads to a sharp decline in associated fish and invertebrate populations.</p>
                    <div class="chart-container mx-auto h-72 md:h-80">
                        <canvas id="speciesDeclineChart"></canvas>
                    </div>
                </div>
                 <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
                    <h3 class="text-xl font-bold text-center mb-4">A Broken Food Web</h3>
                    <p class="text-slate-600 text-center mb-4 text-sm flex-grow">In healthy ecosystems, kelp is a primary energy source. After a collapse, predatory fish are forced to rely on less substantial sources like phytoplankton, fundamentally rewiring the marine food web.</p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4">
                        <div class="flex flex-col items-center">
                            <h4 class="font-semibold mb-2">Healthy Kelp Forest</h4>
                            <div class="chart-container h-48 sm:h-56">
                                <canvas id="healthyDietChart"></canvas>
                            </div>
                        </div>
                        <div class="flex flex-col items-center">
                             <h4 class="font-semibold mb-2">Post-Collapse Reef</h4>
                            <div class="chart-container h-48 sm:h-56">
                                <canvas id="turfDietChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="solutions" class="mb-16">
            <h2 class="text-3xl font-bold text-center mb-2 text-[#F37021]">The Ocean's Ally</h2>
            <p class="text-center text-slate-600 max-w-3xl mx-auto mb-12">Despite their vulnerability, seaweed and kelp offer powerful, nature-based solutions. From capturing vast amounts of carbon to protecting coastlines, they are a critical tool for climate mitigation and adaptation.</p>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4">Carbon Sequestration</h3>
                    <div class="text-6xl font-black text-[#00AEEF] my-4">1,500</div>
                    <p class="text-slate-600 font-semibold">Tons of CO₂ Sequestered</p>
                    <p class="text-slate-500 text-sm">per square kilometer of seaweed farm, annually. This makes it one of the most efficient carbon sinks on the planet.</p>
                </div>
                <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
                    <h3 class="text-xl font-bold mb-4">Agricultural Revolution</h3>
                    <p class="text-slate-600 mb-4 text-sm flex-grow">Adding a small amount of seaweed to livestock feed can drastically cut methane emissions, a potent greenhouse gas.</p>
                    <div class="chart-container mx-auto h-48 w-48">
                        <canvas id="methaneReductionChart"></canvas>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4">Coastal Protection</h3>
                    <div class="text-6xl font-black text-[#00AEEF] my-4">60%</div>
                    <p class="text-slate-600 font-semibold">Reduction in Wave Height</p>
                    <p class="text-slate-500 text-sm">Seaweed farms act as natural breakwaters, absorbing wave energy and protecting coastal communities from erosion and storm surges.</p>
                </div>
            </div>
        </section>

         <section id="path-forward" class="text-center mb-16">
            <h2 class="text-3xl font-bold mb-2 text-[#F37021]">The Path Forward</h2>
            <p class="text-slate-600 max-w-3xl mx-auto mb-8">Addressing this dual reality requires a two-pronged approach: actively protecting the wild forests we have left while simultaneously scaling up sustainable cultivation to harness kelp's full climate-fighting potential.</p>
            <div class="bg-white rounded-lg shadow-lg p-8 max-w-4xl mx-auto">
                 <div class="flex flex-col md:flex-row justify-around items-center space-y-8 md:space-y-0 md:space-x-8">
                    <div class="text-center">
                        <div class="text-6xl mb-2">🛡️</div>
                        <h3 class="text-2xl font-bold text-[#0072BB]">Conservation</h3>
                        <p class="text-slate-600 max-w-xs mx-auto mt-2">Protecting existing kelp forests through MPAs, managing predators, and restoring degraded areas to enhance natural resilience.</p>
                        <button id="elaborateConservation" class="mt-4 bg-[#0072BB] text-white py-2 px-4 rounded-full shadow-md hover:bg-blue-700 transition-colors">✨ Elaborate ✨</button>
                    </div>
                     <div class="text-4xl font-bold text-[#FDB913]">+</div>
                    <div class="text-center">
                        <div class="text-6xl mb-2">🌿</div>
                        <h3 class="text-2xl font-bold text-[#00AEEF]">Cultivation</h3>
                         <p class="text-slate-600 max-w-xs mx-auto mt-2">Scaling responsible seaweed farming to sequester carbon, create sustainable products, and provide vital ecosystem services.</p>
                         <button id="elaborateCultivation" class="mt-4 bg-[#00AEEF] text-white py-2 px-4 rounded-full shadow-md hover:bg-sky-700 transition-colors">✨ Elaborate ✨</button>
                    </div>
                </div>
            </div>
             <button id="climateActionTipBtn" class="mt-12 bg-[#F37021] text-white py-3 px-6 rounded-full shadow-xl hover:bg-orange-600 transition-colors text-lg font-bold">✨ Get a Climate Action Tip ✨</button>
        </section>

    </main>

    <footer class="text-center p-6 bg-[#002D72] text-white text-sm">
        <p>Data synthesized from "The Impact of Climate Change on Seaweed and Kelp Ecosystems: Threats, Consequences, and Solutions."</p>
        <p>Infographic created for educational purposes.</p>
    </footer>

    <!-- The Modal -->
    <div id="responseModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3 id="modalTitle" class="text-xl font-bold mb-4 text-[#002D72]"></h3>
            <p id="modalContent" class="text-slate-700"></p>
            <div id="modalLoading" class="text-center text-slate-500 mt-4 hidden">Loading...</div>
        </div>
    </div>

    <script>
        function wrapText(str) {
            const words = str.split(' ');
            const lines = [];
            let currentLine = '';
            const maxLen = 16;

            for (const word of words) {
                if ((currentLine + word).length > maxLen && currentLine.length > 0) {
                    lines.push(currentLine.trim());
                    currentLine = '';
                }
                currentLine += word + ' ';
            }
            if (currentLine.trim() !== '') {
                lines.push(currentLine.trim());
            }
            return lines;
        }

        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
                return label.join(' ');
            }
            return label;
        };
        
        const brilliantBluesPalette = {
            primary: '#00AEEF',
            secondary: '#0072BB',
            dark: '#002D72',
            accent1: '#FDB913',
            accent2: '#F37021',
            lightGray: '#e2e8f0',
            darkGray: '#475569',
        };

        function createTempImpactChart() {
            const ctx = document.getElementById('tempImpactChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['15°C', '18°C', '20°C', '21°C', '22°C'],
                    datasets: [{
                        label: 'Kelp Survival Rate',
                        data: [100, 95, 70, 20, 0],
                        borderColor: brilliantBluesPalette.primary,
                        backgroundColor: 'rgba(0, 174, 239, 0.1)',
                        fill: true,
                        tension: 0.1,
                        borderWidth: 3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: 'Survival Rate (%)'
                            }
                        },
                        x: {
                             title: {
                                display: true,
                                text: 'Water Temperature'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                title: tooltipTitleCallback
                            }
                        }
                    }
                }
            });
        }
        
        function createSpeciesDeclineChart() {
            const ctx = document.getElementById('speciesDeclineChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Fish Populations', 'Shellfish (clams, crabs)', wrapText('Endangered Red Abalone')],
                    datasets: [{
                        label: 'Population Decline',
                        data: [30, 61, 90],
                        backgroundColor: [brilliantBluesPalette.primary, brilliantBluesPalette.secondary, brilliantBluesPalette.accent2],
                        borderColor: 'rgba(255, 255, 255, 0)',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 100,
                             title: {
                                display: true,
                                text: 'Max Observed Decline (%)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                title: tooltipTitleCallback
                            }
                        }
                    }
                }
            });
        }
        
        const dietChartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            cutout: '60%',
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        boxWidth: 12,
                        padding: 15
                    }
                },
                tooltip: {
                    callbacks: {
                        title: tooltipTitleCallback
                    }
                }
            }
        };

        function createHealthyDietChart() {
            const ctx = document.getElementById('healthyDietChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Kelp-Derived', 'Other Sources'],
                    datasets: [{
                        data: [55, 45],
                        backgroundColor: [brilliantBluesPalette.secondary, brilliantBluesPalette.lightGray],
                        hoverOffset: 4
                    }]
                },
                options: dietChartOptions
            });
        }

        function createTurfDietChart() {
            const ctx = document.getElementById('turfDietChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Phytoplankton', 'Other Sources'],
                    datasets: [{
                        data: [60, 40],
                        backgroundColor: [brilliantBluesPalette.accent1, brilliantBluesPalette.lightGray],
                        hoverOffset: 4
                    }]
                },
                options: dietChartOptions
            });
        }
        
        function createMethaneReductionChart() {
            const ctx = document.getElementById('methaneReductionChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Methane Reduced', 'Remaining Emissions'],
                    datasets: [{
                        data: [90, 10],
                        backgroundColor: [brilliantBluesPalette.primary, brilliantBluesPalette.lightGray],
                        hoverOffset: 4,
                        borderWidth: 0,
                    }]
                },
                options: {
                     responsive: true,
                     maintainAspectRatio: false,
                     cutout: '60%',
                     plugins: {
                        legend: { display: false },
                        tooltip: { callbacks: { title: tooltipTitleCallback } },
                        title: { 
                            display: true, 
                            text: 'Up to 90% Reduction',
                            position: 'bottom',
                            font: { weight: 'bold' }
                        }
                    }
                }
            });
        }

        // LLM Integration
        const modal = document.getElementById('responseModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalContent = document.getElementById('modalContent');
        const modalLoading = document.getElementById('modalLoading');
        const closeButton = document.getElementsByClassName('close-button')[0];

        closeButton.onclick = function() {
            modal.style.display = 'none';
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        async function callGeminiAPI(prompt, title) {
            modal.style.display = 'flex';
            modalTitle.textContent = title;
            modalContent.textContent = '';
            modalLoading.classList.remove('hidden');

            try {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    modalContent.textContent = text;
                } else {
                    modalContent.textContent = "Sorry, I couldn't generate a response. Please try again.";
                }
            } catch (error) {
                console.error('Error calling Gemini API:', error);
                modalContent.textContent = "An error occurred while fetching the response. Please check the console.";
            } finally {
                modalLoading.classList.add('hidden');
            }
        }

        window.onload = function() {
            createTempImpactChart();
            createSpeciesDeclineChart();
            createHealthyDietChart();
            createTurfDietChart();
            createMethaneReductionChart();

            document.getElementById('climateActionTipBtn').addEventListener('click', () => {
                callGeminiAPI(
                    "Generate a very short, inspiring, and actionable tip (1-2 sentences) for an individual to help combat climate change, specifically drawing inspiration from the positive impact and importance of seaweed and kelp ecosystems.",
                    "✨ Your Climate Action Tip ✨"
                );
            });

            document.getElementById('elaborateConservation').addEventListener('click', () => {
                callGeminiAPI(
                    "In 3-4 sentences, explain how 'Conservation' efforts specifically apply to protecting kelp and seaweed forests from climate change impacts.",
                    "✨ Conservation Efforts Explained ✨"
                );
            });

            document.getElementById('elaborateCultivation').addEventListener('click', () => {
                callGeminiAPI(
                    "In 3-4 sentences, explain how 'Cultivation' (farming) of seaweed and kelp contributes to climate change solutions.",
                    "✨ Cultivation for Climate Solutions Explained ✨"
                );
            });
        };
    </script>
</body>
</html>
